(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(552)}])},34:function(e,t,n){"use strict";n.r(t),n.d(t,{TodoContext:function(){return s}});var i=n(7294);let s=(0,i.createContext)();t.default=s},552:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return S},default:function(){return P}});var i=n(5893);n(9271);var s=n(3156),a=n(9661),o=n(5861),l=n(3321),r=n(8703),d=n(1737),u=n(7294);n(4444);var c=n(998),m=n(9828),x=n(1142),h=n(34),f=n(1436);let p=e=>{let{}=e,t=(0,u.useRef)(),{currentUser:n}=(0,f.a)(),{showAlert:s,todo:a,setTodo:o}=(0,u.useContext)(h.TodoContext),r=async()=>{if(null==a?void 0:a.hasOwnProperty("timestamp")){let e=(0,m.JU)(x.db,"todos",a.id),t={...a,timestamp:(0,m.Bt)()};(0,m.r7)(e,t),o({title:"",milk:""}),s("info","Success")}else{let e=(0,m.hJ)(x.db,"todos");await (0,m.ET)(e,{...a,email:n.email,timestamp:(0,m.Bt)()}),o({title:"",milk:""}),s("success","Updated")}};return(0,u.useEffect)(()=>{let e=e=>{t.current.contains(e.target)?console.log("inside"):o({title:"",milk:""})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),(0,i.jsxs)("div",{ref:t,children:[(0,i.jsx)(c.Z,{fullWidth:!0,label:"name",margin:"normal",value:a.title,onChange:e=>o({...a,title:e.target.value})}),(0,i.jsx)(c.Z,{fullWidth:!0,label:"milk",value:a.milk,onChange:e=>o({...a,milk:e.target.value})}),(0,i.jsx)(l.Z,{variant:"contained",onClick:r,sx:{mt:3},children:a.hasOwnProperty("timestamp")?"Update":"Add"})]})};var v=n(1294),j=n(1733),k=n(7976),C=n(891),y=n(3946),w=n(9953),Z=n(381),_=n.n(Z);let g=e=>{let{id:t,timestamp:n,title:s,milk:a}=e,{showAlert:o,setTodo:l}=(0,u.useContext)(h.TodoContext),r=async(e,t)=>{let n=(0,m.JU)(x.db,"todos",e);await (0,m.oe)(n),o("error","Deleted")};return(0,i.jsx)(C.ZP,{onClick:()=>l({id:t,title:s,timestamp:n,milk:a}),sx:{mt:3,boxShadow:3},style:{backgroundColor:"#FAFAFA"},secondaryAction:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.Z,{onClick:e=>r(t,e),children:(0,i.jsx)(j.Z,{})}),(0,i.jsx)(y.Z,{children:(0,i.jsx)(k.Z,{})})]}),children:(0,i.jsx)(w.Z,{primary:[s," - ",a," L"],secondary:_()(n).format("MMMM do, yyyy")})})},b=e=>{let{todosProps:t}=e,[n,s]=(0,u.useState)([]),{currentUser:a}=(0,f.a)();return(0,u.useEffect)(()=>{let e=(0,v.hJ)(x.db,"todos"),t=(0,v.IO)(e,(0,v.ar)("email","==",null==a?void 0:a.email),(0,v.Xo)("timestamp","desc")),n=(0,v.cf)(t,e=>{s(e.docs.map(e=>{var t;return{...e.data(),id:e.id,timestamp:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate().getTime()}}))});return n},[]),(0,i.jsx)("div",{children:n.map(e=>(0,i.jsx)(g,{id:e.id,title:e.title,milk:e.milk,timestamp:e.timestamp},e.id))})};var E=n(5418),S=!0;function P(e){let{todosProps:t}=e,{currentUser:n}=(0,f.a)(),[c,m]=(0,u.useState)(!1),[v,j]=(0,u.useState)("success"),[k,C]=(0,u.useState)(""),[y,w]=(0,u.useState)({title:"",milk:""}),Z=(e,t)=>{j(e),C(t),m(!0)},_=(e,t)=>{"clickaway"!==t&&m(!1)};return(0,i.jsx)(h.TodoContext.Provider,{value:{showAlert:Z,todo:y,setTodo:w},children:(0,i.jsxs)(s.Z,{maxWidth:"sm",children:[(0,i.jsxs)(E.Z,{sx:{display:"flex",justifyContent:"space-between"},mt:3,children:[(0,i.jsx)(a.Z,{src:n.photoURL}),(0,i.jsxs)(o.Z,{variant:"h5",children:[n.displayName,(0,i.jsx)(l.Z,{variant:"contained",style:{height:"40px",marginLeft:"20px"},onClick:()=>x.I.signOut(),children:(0,i.jsx)("h5",{children:"Sign Out"})})]})]}),(0,i.jsx)(p,{}),(0,i.jsx)(r.Z,{open:c,autoHideDuration:6e3,onClose:_,children:(0,i.jsx)(d.Z,{onClose:_,severity:v,sx:{width:"100%"},children:k})}),(0,i.jsx)(b,{todosProps:t})]})})}}},function(e){e.O(0,[885,738,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);